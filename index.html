<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyGrow Games</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            background: #ffffff;
            color: #202124;
            overflow-x: hidden;
        }

        /* Â∑¶‰æßÂØºËà™Ê†è */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: #ffffff;
            border-right: 1px solid #e8eaed;
            padding: 20px;
            z-index: 1000;
            overflow-y: auto;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 40px;
            padding: 10px 0;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #4285f4, #34a853);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 20px;
            font-weight: bold;
        }

        .logo-text {
            font-size: 20px;
            font-weight: 600;
            color: #202124;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 24px;
            color: #5f6368;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-item:hover {
            background: #f1f3f4;
            color: #202124;
        }

        .nav-item.active {
            background: #e8f0fe;
            color: #1a73e8;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-text {
            font-size: 15px;
            font-weight: 500;
        }

        .language-selector {
            display: flex;
            gap: 10px;
            font-size: 12px;
        }

        .language-selector a {
            color: #999;
            text-decoration: none;
        }

        .language-selector a.active {
            color: #2c5aa0;
            font-weight: bold;
        }

        /* ‰∏ªÂÜÖÂÆπÂå∫ */
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
        }

        /* È°∂ÈÉ®ÊêúÁ¥¢Ê†è */
        .top-bar {
            padding: 20px 40px;
            background: #ffffff;
            border-bottom: 1px solid #e8eaed;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 6px rgba(32,33,36,.28);
        }

        .search-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .search-box {
            flex: 1;
            max-width: 500px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 50px 12px 20px;
            background: #f8f9fa;
            border: 1px solid #e8eaed;
            border-radius: 24px;
            color: #202124;
            font-size: 15px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #4285f4;
            box-shadow: 0 1px 6px rgba(32,33,36,.28);
            background: #ffffff;
        }

        .search-input::placeholder {
            color: #5f6368;
        }

        .search-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #5f6368;
            cursor: pointer;
        }

        .language-selector {
            display: flex;
            gap: 8px;
        }

        .lang-btn {
            padding: 8px 12px;
            background: #f8f9fa;
            border: 1px solid #e8eaed;
            border-radius: 20px;
            color: #5f6368;
            text-decoration: none;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .lang-btn:hover,
        .lang-btn.active {
            background: #4285f4;
            color: #ffffff;
            border-color: #4285f4;
        }

        .container {
            padding: 30px 40px;
        }

        /* Categories */
        .categories {
            margin-bottom: 30px;
        }

        .category-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #202124;
        }

        .category-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .category-tag {
            background: #f8f9fa;
            border: 1px solid #e8eaed;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 13px;
            color: #5f6368;
            text-decoration: none;
            transition: all 0.3s;
        }

        .category-tag:hover,
        .category-tag.active {
            background: #4285f4;
            color: white;
            border-color: #4285f4;
        }

        .view-more {
            color: #2c5aa0;
            text-decoration: none;
            font-size: 14px;
            float: right;
            margin-top: -30px;
        }

        .view-more:hover {
            text-decoration: underline;
        }

        /* Games Grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 40px;
        }

        .game-card {
            background: #ffffff;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid #e8eaed;
            position: relative;
            box-shadow: 0 1px 6px rgba(32,33,36,.28);
        }

        .game-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(32,33,36,.28);
            border-color: #4285f4;
        }

        .game-image {
            width: 100%;
            height: 140px;
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-weight: 600;
            font-size: 14px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .game-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.3) 100%);
        }

        /* HOTÊ†áÁ≠æ */
        .hot-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #ea4335;
            color: #ffffff;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            z-index: 2;
        }

        .new-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #34a853;
            color: #ffffff;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            z-index: 2;
        }

        .game-info {
            padding: 16px;
        }

        .game-title {
            font-size: 15px;
            font-weight: 600;
            color: #202124;
            margin-bottom: 8px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .game-category {
            font-size: 12px;
            color: #5f6368;
            margin-bottom: 12px;
        }

        .game-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .game-tag {
            background: #e8f0fe;
            color: #1a73e8;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 500;
        }



        /* Sections */
        .section {
            margin-bottom: 50px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #202124;
        }

        .view-more {
            color: #1a73e8;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            padding: 8px 16px;
            border: 1px solid #1a73e8;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .view-more:hover {
            background: #1a73e8;
            color: #ffffff;
        }

        /* Footer */
        .footer {
            background: white;
            border-top: 1px solid #ddd;
            margin-top: 60px;
            padding: 30px 0;
            text-align: center;
            color: #666;
            font-size: 12px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .language-selector {
                display: none;
            }
            
            .games-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 10px;
            }
        }

        /* Game Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            position: relative;
            margin: 5% auto;
            width: 90%;
            max-width: 800px;
            height: 80%;
            background: #ffffff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(32,33,36,.28);
        }

        .modal-header {
            background: #ffffff;
            padding: 15px 20px;
            border-bottom: 1px solid #e8eaed;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close {
            color: #5f6368;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #202124;
        }

        .game-frame {
            width: 100%;
            height: calc(100% - 60px);
            border: none;
        }
    </style>
</head>
<body>
    <!-- Â∑¶‰æßÂØºËà™Ê†è -->
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon">üéÆ</div>
            <div class="logo-text">MyGrow Games</div>
            </div>

        <div class="nav-item active" data-section="home">
            <div class="nav-icon">üè†</div>
            <div class="nav-text">Home</div>
        </div>

        <div class="nav-item" data-section="recently">
            <div class="nav-icon">üïê</div>
            <div class="nav-text">Recently played</div>
            </div>

        <div class="nav-item" data-section="new">
            <div class="nav-icon">‚≠ê</div>
            <div class="nav-text">New</div>
        </div>

        <div class="nav-item" data-section="trending">
            <div class="nav-icon">üìà</div>
            <div class="nav-text">Trending now</div>
        </div>

        <div class="nav-item" data-section="featured">
            <div class="nav-icon">üëë</div>
            <div class="nav-text">Featured</div>
        </div>

        <div style="margin: 20px 0; height: 1px; background: #e8eaed;"></div>

        <div style="color: #5f6368; font-size: 12px; font-weight: 600; text-transform: uppercase; margin: 20px 16px 12px 16px; letter-spacing: 0.5px;">Categories</div>

        <div class="nav-item" data-category="all">
            <div class="nav-icon">üéØ</div>
            <div class="nav-text">All Games</div>
        </div>

        <div class="nav-item" data-category="casual">
            <div class="nav-icon">üòä</div>
            <div class="nav-text">Casual</div>
        </div>

        <div class="nav-item" data-category="puzzle">
            <div class="nav-icon">üß©</div>
            <div class="nav-text">Puzzle</div>
        </div>

        <div class="nav-item" data-category="action">
            <div class="nav-icon">‚ö°</div>
            <div class="nav-text">Action</div>
        </div>

        <div class="nav-item" data-category="adventure">
            <div class="nav-icon">üó∫Ô∏è</div>
            <div class="nav-text">Adventure</div>
        </div>

        <div class="nav-item" data-category="sports">
            <div class="nav-icon">üèÜ</div>
            <div class="nav-text">Sports</div>
        </div>

        <div class="nav-item" data-category="racing">
            <div class="nav-icon">üèéÔ∏è</div>
            <div class="nav-text">Racing</div>
        </div>
    </div>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
    <div class="main-content">
        <!-- È°∂ÈÉ®ÊêúÁ¥¢Ê†è -->
        <div class="top-bar">
            <div class="search-container">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="Search games..." id="searchInput">
                    <button class="search-btn" onclick="performSearch()">üîç</button>
                </div>
                <div class="language-selector">
                    <a href="#" class="lang-btn active" onclick="switchLanguage('en', event)">English</a>
                    <a href="#" class="lang-btn" onclick="switchLanguage('zh', event)">‰∏≠Êñá</a>
                    <a href="#" class="lang-btn" onclick="switchLanguage('ru', event)">–†—É—Å—Å–∫–∏–π</a>
                    <a href="#" class="lang-btn" onclick="switchLanguage('es', event)">Espa√±ol</a>
                </div>
            </div>
        </div>

        <!-- ÂÜÖÂÆπÂå∫Âüü -->
        <div class="container">

        <!-- Recently played -->
        <section class="section" id="recently">
            <div class="section-header">
                <div class="section-title">Recently played</div>
                <a href="#" class="view-more">View more</a>
            </div>
            <div class="games-grid" id="recentlyGames"></div>
        </section>

        <!-- Featured games -->
        <section class="section" id="featured">
            <div class="section-header">
                <div class="section-title">Featured games</div>
                <a href="#" class="view-more">View more</a>
            </div>
            <div class="games-grid" id="featuredGames"></div>
        </section>

        <!-- New games -->
        <section class="section" id="new">
            <div class="section-header">
                <div class="section-title">New games</div>
                <a href="#" class="view-more">View more</a>
            </div>
            <div class="games-grid" id="newGames"></div>
        </section>
    </div>
        </div>

    <!-- Game Modal -->
    <div id="gameModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Game Title</h3>
                <span class="close">&times;</span>
            </div>
            <iframe id="gameFrame" class="game-frame" src=""></iframe>
        </div>
    </div>

    <script>
        let allGames = [];
        let recentlyPlayed = JSON.parse(localStorage.getItem('recentlyPlayed') || '[]');
        let currentLanguage = localStorage.getItem('currentLanguage') || 'en';

        // Â§öËØ≠Ë®ÄÊñáÊú¨Êï∞ÊçÆ
        const translations = {
            en: {
                searchPlaceholder: "Search games...",
                loadingPlaceholder: "Loading games data...",
                recentlyPlayed: "Recently played",
                featuredGames: "Featured games",
                newGames: "New games",
                trendingNow: "Trending now",
                viewMore: "View more",
                home: "Home",
                new: "New",
                featured: "Featured",
                categories: "Categories",
                allGames: "All Games",
                casual: "Casual",
                puzzle: "Puzzle",
                action: "Action",
                adventure: "Adventure",
                sports: "Sports",
                racing: "Racing",
                startPlayingMessage: "Start playing to see your history here",
                loadingGames: "Loading games...",
                totalGamesAvailable: "Total games available",
                remaining: "remaining",
                gameNotAvailable: "This game is not available for play at the moment.",
                showingLatest: "Showing latest",
                games: "games",
                newGamesAvailable: "new games available",
                hotGamesTrending: "hot games trending now",
                trendingGamesSelected: "trending games selected for you",
                gameFeatures: "Game Features",
                category: "Category",
                tags: "Tags",
                gameId: "Game ID",
                openInNewTab: "Open in New Tab",
                close: "Close",
                frameLoadingNote: "Some games may not load in embedded frames due to security policies, but can be played normally in a new tab"
            },
            zh: {
                searchPlaceholder: "ÊêúÁ¥¢Ê∏∏Êàè...",
                loadingPlaceholder: "Ê≠£Âú®Âä†ËΩΩÊ∏∏ÊàèÊï∞ÊçÆ...",
                recentlyPlayed: "ÊúÄËøëÊ∏∏Áé©",
                featuredGames: "Á≤æÈÄâÊ∏∏Êàè",
                newGames: "Êñ∞Ê∏∏Êàè",
                trendingNow: "ÂΩìÂâçÁÉ≠Èó®",
                viewMore: "Êü•ÁúãÊõ¥Â§ö",
                home: "È¶ñÈ°µ",
                new: "Êñ∞Ê∏∏Êàè",
                featured: "Á≤æÈÄâ",
                categories: "ÂàÜÁ±ª",
                allGames: "ÊâÄÊúâÊ∏∏Êàè",
                casual: "‰ºëÈó≤",
                puzzle: "ÁõäÊô∫",
                action: "Âä®‰Ωú",
                adventure: "ÂÜíÈô©",
                sports: "‰ΩìËÇ≤",
                racing: "Á´ûÈÄü",
                startPlayingMessage: "ÂºÄÂßãÊ∏∏Êàè‰ª•Êü•ÁúãÊÇ®ÁöÑÂéÜÂè≤ËÆ∞ÂΩï",
                loadingGames: "Ê≠£Âú®Âä†ËΩΩÊ∏∏Êàè...",
                totalGamesAvailable: "ÂèØÁî®Ê∏∏ÊàèÊÄªÊï∞",
                remaining: "Ââ©‰Ωô",
                gameNotAvailable: "Ê≠§Ê∏∏ÊàèÊöÇÊó∂Êó†Ê≥ïÊ∏∏Áé©„ÄÇ",
                showingLatest: "ÊòæÁ§∫ÊúÄÊñ∞",
                games: "Ê∏∏Êàè",
                newGamesAvailable: "‰∏™Êñ∞Ê∏∏ÊàèÂèØÁî®",
                hotGamesTrending: "‰∏™ÁÉ≠Èó®Ê∏∏ÊàèÊ≠£Âú®ÊµÅË°å",
                trendingGamesSelected: "‰∏™ÁÉ≠Èó®Ê∏∏Êàè‰∏∫ÊÇ®Á≤æÈÄâ",
                gameFeatures: "Ê∏∏ÊàèÁâπËâ≤",
                category: "ÂàÜÁ±ª",
                tags: "Ê†áÁ≠æ",
                gameId: "Ê∏∏ÊàèID",
                openInNewTab: "Âú®Êñ∞Ê†áÁ≠æÈ°µ‰∏≠ÊâìÂºÄ",
                close: "ÂÖ≥Èó≠",
                frameLoadingNote: "Êüê‰∫õÊ∏∏ÊàèÂèØËÉΩÂõ†‰∏∫ÂÆâÂÖ®Á≠ñÁï•Êó†Ê≥ïÂú®ÂµåÂÖ•Ê°ÜÊû∂‰∏≠Âä†ËΩΩÔºå‰ΩÜÂèØ‰ª•Âú®Êñ∞Ê†áÁ≠æÈ°µ‰∏≠Ê≠£Â∏∏Ê∏∏Áé©"
            },
            ru: {
                searchPlaceholder: "–ü–æ–∏—Å–∫ –∏–≥—Ä...",
                loadingPlaceholder: "–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä...",
                recentlyPlayed: "–ù–µ–¥–∞–≤–Ω–æ —Å—ã–≥—Ä–∞–Ω–Ω—ã–µ",
                featuredGames: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–≥—Ä—ã",
                newGames: "–ù–æ–≤—ã–µ –∏–≥—Ä—ã",
                trendingNow: "–í —Ç—Ä–µ–Ω–¥–µ —Å–µ–π—á–∞—Å",
                viewMore: "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±–æ–ª—å—à–µ",
                home: "–ì–ª–∞–≤–Ω–∞—è",
                new: "–ù–æ–≤–æ–µ",
                featured: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ",
                categories: "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏",
                allGames: "–í—Å–µ –∏–≥—Ä—ã",
                casual: "–ö–∞–∑—É–∞–ª—å–Ω—ã–µ",
                puzzle: "–ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∏",
                action: "–≠–∫—à–µ–Ω",
                adventure: "–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è",
                sports: "–°–ø–æ—Ä—Ç",
                racing: "–ì–æ–Ω–∫–∏",
                startPlayingMessage: "–ù–∞—á–Ω–∏—Ç–µ –∏–≥—Ä–∞—Ç—å, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–¥–µ—Å—å",
                loadingGames: "–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä...",
                totalGamesAvailable: "–î–æ—Å—Ç—É–ø–Ω–æ –∏–≥—Ä",
                remaining: "–æ—Å—Ç–∞–ª–æ—Å—å",
                gameNotAvailable: "–≠—Ç–∞ –∏–≥—Ä–∞ —Å–µ–π—á–∞—Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∏–≥—Ä—ã.",
                showingLatest: "–ü–æ–∫–∞–∑–∞–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–∏–µ",
                games: "–∏–≥—Ä—ã",
                newGamesAvailable: "–Ω–æ–≤—ã—Ö –∏–≥—Ä –¥–æ—Å—Ç—É–ø–Ω–æ",
                hotGamesTrending: "–ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∏–≥—Ä –≤ —Ç—Ä–µ–Ω–¥–µ",
                trendingGamesSelected: "—Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö –∏–≥—Ä –≤—ã–±—Ä–∞–Ω–æ –¥–ª—è –≤–∞—Å",
                gameFeatures: "–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã",
                category: "–ö–∞—Ç–µ–≥–æ—Ä–∏—è",
                tags: "–¢–µ–≥–∏",
                gameId: "ID –∏–≥—Ä—ã",
                openInNewTab: "–û—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ",
                close: "–ó–∞–∫—Ä—ã—Ç—å",
                frameLoadingNote: "–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–≥—Ä—ã –º–æ–≥—É—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ—Ä–µ–π–º–∞—Ö –∏–∑-–∑–∞ –ø–æ–ª–∏—Ç–∏–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–æ –º–æ–≥—É—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ"
            },
            es: {
                searchPlaceholder: "Buscar juegos...",
                loadingPlaceholder: "Cargando datos de juegos...",
                recentlyPlayed: "Jugados recientemente",
                featuredGames: "Juegos destacados",
                newGames: "Juegos nuevos",
                trendingNow: "Tendencia ahora",
                viewMore: "Ver m√°s",
                home: "Inicio",
                new: "Nuevo",
                featured: "Destacados",
                categories: "Categor√≠as",
                allGames: "Todos los juegos",
                casual: "Casual",
                puzzle: "Rompecabezas",
                action: "Acci√≥n",
                adventure: "Aventura",
                sports: "Deportes",
                racing: "Carreras",
                startPlayingMessage: "Comienza a jugar para ver tu historial aqu√≠",
                loadingGames: "Cargando juegos...",
                totalGamesAvailable: "Total de juegos disponibles",
                remaining: "restantes",
                gameNotAvailable: "Este juego no est√° disponible para jugar en este momento.",
                showingLatest: "Mostrando los √∫ltimos",
                games: "juegos",
                newGamesAvailable: "nuevos juegos disponibles",
                hotGamesTrending: "juegos populares en tendencia",
                trendingGamesSelected: "juegos en tendencia seleccionados para ti",
                gameFeatures: "Caracter√≠sticas del juego",
                category: "Categor√≠a",
                tags: "Etiquetas",
                gameId: "ID del juego",
                openInNewTab: "Abrir en nueva pesta√±a",
                close: "Cerrar",
                frameLoadingNote: "Algunos juegos pueden no cargarse en marcos integrados debido a pol√≠ticas de seguridad, pero pueden jugarse normalmente en una nueva pesta√±a"
            }
        };

        // Ëé∑ÂèñÂΩìÂâçËØ≠Ë®ÄÁöÑÊñáÊú¨
        function t(key) {
            return translations[currentLanguage] && translations[currentLanguage][key] 
                ? translations[currentLanguage][key] 
                : translations.en[key] || key;
        }

        // ÂàáÊç¢ËØ≠Ë®Ä
        function switchLanguage(lang, event) {
            event.preventDefault();
            
            currentLanguage = lang;
            localStorage.setItem('currentLanguage', lang);
            
            // Êõ¥Êñ∞ËØ≠Ë®ÄÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Êõ¥Êñ∞È°µÈù¢ÊñáÊú¨
            updatePageTexts();
            
            // ÈáçÊñ∞Ê∏≤ÊüìÊ∏∏ÊàèÂàóË°®
            displayFeaturedGames();
            updateRecentlyPlayed();
        }

        // Êõ¥Êñ∞È°µÈù¢ÊñáÊú¨
        function updatePageTexts() {
            // Êõ¥Êñ∞ÊêúÁ¥¢Ê°ÜÂç†‰ΩçÁ¨¶
            const searchInput = document.getElementById('searchInput');
            if (allGames.length > 0) {
                searchInput.placeholder = `${t('searchPlaceholder')} ${allGames.length} ${t('games')}...`;
            } else {
                searchInput.placeholder = t('searchPlaceholder');
            }
            
            // Êõ¥Êñ∞ÂØºËà™ËèúÂçï
            const navTexts = document.querySelectorAll('.nav-text');
            const navKeys = ['home', 'recentlyPlayed', 'new', 'trendingNow', 'featured', 'categories', 'allGames', 'casual', 'puzzle', 'action', 'adventure', 'sports', 'racing'];
            
            navTexts.forEach((textEl, index) => {
                if (navKeys[index]) {
                    textEl.textContent = t(navKeys[index]);
                }
            });
            
            // Êõ¥Êñ∞ÂàÜÂå∫Ê†áÈ¢ò
            document.querySelectorAll('.section-title').forEach(title => {
                const sectionId = title.closest('.section').id;
                switch(sectionId) {
                    case 'recently':
                        title.textContent = t('recentlyPlayed');
                        break;
                    case 'featured':
                        title.textContent = t('featuredGames');
                        break;
                    case 'new':
                        title.textContent = t('newGames');
                        break;
                }
            });
            
            // Êõ¥Êñ∞"Êü•ÁúãÊõ¥Â§ö"ÊåâÈíÆ
            document.querySelectorAll('.view-more').forEach(btn => {
                btn.textContent = t('viewMore');
            });
            
            // Êõ¥Êñ∞ÂàÜÁ±ªÊ†áÁ≠æ
            const categoryDiv = document.querySelector('[style*="text-transform: uppercase"]');
            if (categoryDiv) {
                categoryDiv.textContent = t('categories');
            }
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // ÂàùÂßãÂåñËØ≠Ë®ÄËÆæÁΩÆ
            initializeLanguage();
            loadGamesData();
            setupEventListeners();
            updateRecentlyPlayed();
        });

        // ÂàùÂßãÂåñËØ≠Ë®ÄËÆæÁΩÆ
        function initializeLanguage() {
            // ËÆæÁΩÆÊ≠£Á°ÆÁöÑËØ≠Ë®ÄÊåâÈíÆ‰∏∫ÊøÄÊ¥ªÁä∂ÊÄÅ
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.onclick.toString().includes(`'${currentLanguage}'`)) {
                    btn.classList.add('active');
                }
            });
            
            // Êõ¥Êñ∞È°µÈù¢ÊñáÊú¨
            updatePageTexts();
        }

        // Âä†ËΩΩÊ∏∏ÊàèÊï∞ÊçÆ
        async function loadGamesData() {
            // ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
            const searchInput = document.getElementById('searchInput');
            searchInput.placeholder = t('loadingPlaceholder');
            
            try {
                console.log('üéÆ Loading games data from JSON file...');
                const response = await fetch('Ê∏∏ÊàèÂêàÈõÜ/games_data_with_images.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                allGames = await response.json();
                console.log(`‚úÖ Successfully loaded ${allGames.length} games!`);
                
                // Êõ¥Êñ∞ÊêúÁ¥¢Ê°ÜÂç†‰ΩçÁ¨¶
                searchInput.placeholder = `${t('searchPlaceholder')} ${allGames.length} ${t('games')}...`;
                
                // Âú®ÊéßÂà∂Âè∞ÊòæÁ§∫‰∏Ä‰∫õÁ§∫‰æãÊ∏∏Êàè
                console.log('üìã Sample games:', allGames.slice(0, 3));
                
                displayFeaturedGames();
                
                // ÊòæÁ§∫ÊàêÂäüÈÄöÁü•
                showNotification(`üéâ ${t('loadingGames')} ${allGames.length} ${t('games')} successfully!`, 'success');
                
            } catch (error) {
                console.error('‚ùå Failed to load games data:', error);
                console.log('üîÑ Using fallback demo games...');
                
                // ÂàõÂª∫Êõ¥Â§öÊºîÁ§∫Ê∏∏ÊàèÊï∞ÊçÆ
                allGames = createDemoGames();
                
                searchInput.placeholder = `${t('searchPlaceholder')} ${allGames.length} playable ${t('games')}...`;
                displayFeaturedGames();
                
                // ÊòæÁ§∫ÊàêÂäüÈÄöÁü•
                showNotification(`üéÆ ${t('loadingGames')} ${allGames.length} playable ${t('games')} successfully!`, 'success');
            }
        }

        // ÂàõÂª∫ÁúüÂÆûÂèØÁé©ÁöÑÊ∏∏ÊàèÊï∞ÊçÆ
        function createDemoGames() {
            // ÂÆö‰πâÁúüÂÆûÂèØÁé©ÁöÑÊ∏∏ÊàèÂàóË°®
            const realGames = [
                {
                    id: '1v1-lol',
                    title: '1v1.LOL',
                    category: 'action',
                    tags: ['Action', 'Multiplayer', 'Shooter', '3D'],
                    embedUrl: 'https://www.crazygames.com/embed/1v1-lol',
                    isHot: true,
                    isNew: false,
                    description: '1v1.LOL is a competitive online third-person shooter where you build your way around the map tactically.'
                },
                {
                    id: 'shell-shockers',
                    title: 'Shell Shockers',
                    category: 'action',
                    tags: ['Action', 'Multiplayer', 'FPS', '3D'],
                    embedUrl: 'https://www.crazygames.com/embed/shell-shockers',

                    isHot: true,
                    isNew: false,
                    description: 'Shell Shockers is a multiplayer .io FPS game featuring eggs armed with guns.'
                },
                {
                    id: 'moto-x3m',
                    title: 'Moto X3M',
                    category: 'racing',
                    tags: ['Racing', 'Sports', 'Bike', 'Stunt'],
                    embedUrl: 'https://www.crazygames.com/embed/moto-x3m',
                    isHot: false,
                    isNew: false,
                    description: 'Moto X3M is a driving bike game that takes dirt bike racing to the next level.'
                },
                {
                    id: 'drift-hunters',
                    title: 'Drift Hunters',
                    category: 'racing',
                    tags: ['Racing', 'Car', 'Drifting', '3D'],
                    embedUrl: 'https://www.crazygames.com/embed/drift-hunters',
                    isHot: false,
                    isNew: false,
                    description: 'Drift Hunters is a free-to-play car 3D game that lets you experience the art of drifting.'
                },
                {
                    id: 'basketbros',
                    title: 'BasketBros',
                    category: 'sports',
                    tags: ['Sports', 'Basketball', 'Multiplayer', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/basketbros',
                    isHot: false,
                    isNew: true,
                    description: 'BasketBros is a fast-paced basketball game with online and offline gameplay.'
                },
                {
                    id: 'tiny-fishing',
                    title: 'Tiny Fishing',
                    category: 'casual',
                    tags: ['Casual', 'Fishing', 'Relaxing', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/tiny-fishing',
                    isHot: false,
                    isNew: false,
                    description: 'Tiny Fishing is a relaxing fishing game where you catch fish and upgrade your gear.'
                },
                {
                    id: 'blumgi-ball',
                    title: 'Blumgi Ball',
                    category: 'sports',
                    tags: ['Sports', 'Basketball', 'Physics', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/blumgi-ball',
                    isHot: false,
                    isNew: false,
                    description: 'Blumgi Ball is a physics-based basketball game with unique mechanics.'
                },
                {
                    id: 'stick-merge',
                    title: 'Stick Merge',
                    category: 'casual',
                    tags: ['Casual', 'Merge', 'Strategy', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/stick-merge',
                    isHot: false,
                    isNew: true,
                    description: 'Stick Merge is a casual merge game where you combine sticks to create powerful weapons.'
                },
                {
                    id: 'temple-run-2',
                    title: 'Temple Run 2',
                    category: 'adventure',
                    tags: ['Adventure', 'Running', 'Mobile', '3D'],
                    embedUrl: 'https://www.crazygames.com/embed/temple-run-2',
                    isHot: true,
                    isNew: false,
                    description: 'Temple Run 2 is an endless running adventure game with stunning graphics.'
                },
                {
                    id: 'subway-surfers',
                    title: 'Subway Surfers',
                    category: 'adventure',
                    tags: ['Adventure', 'Running', 'Mobile', '3D'],
                    embedUrl: 'https://www.crazygames.com/embed/subway-surfers',
                    isHot: true,
                    isNew: false,
                    description: 'Subway Surfers is a classic endless running game where you dash through subway tracks.'
                },
                {
                    id: 'house-of-hazards',
                    title: 'House of Hazards',
                    category: 'casual',
                    tags: ['Casual', 'Multiplayer', 'Party', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/house-of-hazards',
                    isHot: false,
                    isNew: false,
                    description: 'House of Hazards is a hilarious party game where you navigate through a dangerous house.'
                },
                {
                    id: 'crossy-road',
                    title: 'Crossy Road',
                    category: 'arcade',
                    tags: ['Arcade', 'Casual', 'Mobile', '3D'],
                    embedUrl: 'https://www.crazygames.com/embed/crossy-road',
                    isHot: false,
                    isNew: false,
                    description: 'Crossy Road is an arcade game where you help characters cross busy roads and rivers.'
                },
                {
                    id: 'getting-over-it',
                    title: 'Getting Over It',
                    category: 'adventure',
                    tags: ['Adventure', 'Difficult', 'Climbing', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/getting-over-it',
                    isHot: false,
                    isNew: false,
                    description: 'Getting Over It is a challenging climbing game that will test your patience.'
                },
                {
                    id: 'geometry-dash',
                    title: 'Geometry Dash',
                    category: 'arcade',
                    tags: ['Arcade', 'Rhythm', 'Platformer', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/geometry-dash',
                    isHot: true,
                    isNew: false,
                    description: 'Geometry Dash is a rhythm-based platformer with challenging obstacles.'
                },
                {
                    id: 'slope',
                    title: 'Slope',
                    category: 'arcade',
                    tags: ['Arcade', 'Speed', 'Endless', '3D'],
                    embedUrl: 'https://www.crazygames.com/embed/slope',
                    isHot: false,
                    isNew: false,
                    description: 'Slope is a high-speed 3D running game where you control a ball down a slope.'
                },
                {
                    id: 'run-3',
                    title: 'Run 3',
                    category: 'arcade',
                    tags: ['Arcade', 'Running', 'Space', '3D'],
                    embedUrl: 'https://www.crazygames.com/embed/run-3',
                    isHot: false,
                    isNew: false,
                    description: 'Run 3 is an endless running game set in space with unique gravity mechanics.'
                },
                {
                    id: 'happy-wheels',
                    title: 'Happy Wheels',
                    category: 'action',
                    tags: ['Action', 'Physics', 'Ragdoll', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/happy-wheels',
                    isHot: false,
                    isNew: false,
                    description: 'Happy Wheels is a ragdoll physics game with challenging obstacle courses.'
                },
                {
                    id: 'fireboy-watergirl',
                    title: 'Fireboy and Watergirl',
                    category: 'puzzle',
                    tags: ['Puzzle', 'Cooperation', 'Adventure', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/fireboy-and-watergirl-forest-temple',
                    isHot: false,
                    isNew: false,
                    description: 'Fireboy and Watergirl is a cooperative puzzle game where you control two characters.'
                },
                {
                    id: 'paper-io-2',
                    title: 'Paper.io 2',
                    category: 'arcade',
                    tags: ['Arcade', 'Multiplayer', 'Territory', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/paper-io-2',
                    isHot: false,
                    isNew: true,
                    description: 'Paper.io 2 is a multiplayer territory game where you conquer areas by drawing lines.'
                },
                {
                    id: 'wordle',
                    title: 'Wordle',
                    category: 'puzzle',
                    tags: ['Puzzle', 'Word', 'Logic', '2D'],
                    embedUrl: 'https://www.crazygames.com/embed/wordle',
                    isHot: true,
                    isNew: true,
                    description: 'Wordle is a daily word puzzle game where you guess a five-letter word.'
                }
            ];
            
            return realGames;
        }

        // ÊòæÁ§∫ÈÄöÁü•
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                transform: translateX(400px);
                transition: transform 0.3s ease;
                max-width: 300px;
                ${type === 'success' ? 'background: linear-gradient(45deg, #10b981, #059669);' : ''}
                ${type === 'warning' ? 'background: linear-gradient(45deg, #f59e0b, #d97706);' : ''}
                ${type === 'error' ? 'background: linear-gradient(45deg, #ef4444, #dc2626);' : ''}
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Âä®ÁîªÊòæÁ§∫
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // 3ÁßíÂêéËá™Âä®ÈöêËóè
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // ÊòæÁ§∫Á≤æÈÄâÊ∏∏Êàè
        function displayFeaturedGames() {
            const grid = document.getElementById('featuredGames');
            grid.innerHTML = '';

            if (allGames.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #5f6368;">
                        <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">‚è≥</div>
                        <div style="font-size: 16px; margin-bottom: 8px;">${t('loadingGames')}</div>
                        <div style="font-size: 14px; opacity: 0.7;">${t('totalGamesAvailable')}: ${allGames.length}</div>
                    </div>
                `;
                return;
            }

            // ÊòæÁ§∫ÊâÄÊúâÊ∏∏Êàè
            allGames.forEach((game, index) => {
                const gameCard = createGameCard(game, index);
                grid.appendChild(gameCard);
            });

            // ÊòæÁ§∫Ê∏∏ÊàèÁªüËÆ°
            console.log(`Loaded ${allGames.length} playable games`);
        }

                // ÂàõÂª∫Ê∏∏ÊàèÂç°Áâá
        function createGameCard(game, index) {
            const card = document.createElement('div');
            card.className = 'game-card';
            
            let badgeHtml = '';
            if (game.isHot) {
                badgeHtml = '<div class="hot-badge">HOT</div>';
            } else if (game.isNew) {
                badgeHtml = '<div class="new-badge">NEW</div>';
            }

            // ‰∏∫ÊØè‰∏™Ê∏∏ÊàèËÆæÁΩÆÁã¨ÁâπÁöÑËÉåÊôØÂíåÂõæÊ†á
            const gameStyles = {
                '1v1-lol': { bg: 'linear-gradient(135deg, #ff6b6b, #ee5a52)', icon: 'üéØ' },
                'shell-shockers': { bg: 'linear-gradient(135deg, #feca57, #ff9ff3)', icon: 'ü•ö' },
                'moto-x3m': { bg: 'linear-gradient(135deg, #ff9068, #fd746c)', icon: 'üèçÔ∏è' },
                'drift-hunters': { bg: 'linear-gradient(135deg, #3742fa, #2f3542)', icon: 'üèéÔ∏è' },
                'basketbros': { bg: 'linear-gradient(135deg, #ff7675, #e17055)', icon: 'üèÄ' },
                'tiny-fishing': { bg: 'linear-gradient(135deg, #74b9ff, #0984e3)', icon: 'üé£' },
                'blumgi-ball': { bg: 'linear-gradient(135deg, #fd79a8, #e84393)', icon: '‚õπÔ∏è' },
                'stick-merge': { bg: 'linear-gradient(135deg, #fdcb6e, #e17055)', icon: '‚öîÔ∏è' },
                'temple-run-2': { bg: 'linear-gradient(135deg, #6c5ce7, #a29bfe)', icon: 'üèÉ' },
                'subway-surfers': { bg: 'linear-gradient(135deg, #00b894, #00cec9)', icon: 'üöá' },
                'house-of-hazards': { bg: 'linear-gradient(135deg, #fab1a0, #e17055)', icon: 'üè†' },
                'crossy-road': { bg: 'linear-gradient(135deg, #55a3ff, #003d82)', icon: 'üêî' },
                'getting-over-it': { bg: 'linear-gradient(135deg, #fd79a8, #fdcb6e)', icon: '‚õ∞Ô∏è' },
                'geometry-dash': { bg: 'linear-gradient(135deg, #00b894, #00cec9)', icon: 'üìê' },
                'slope': { bg: 'linear-gradient(135deg, #e17055, #d63031)', icon: 'üìê' },
                'run-3': { bg: 'linear-gradient(135deg, #6c5ce7, #2d3436)', icon: 'üöÄ' },
                'happy-wheels': { bg: 'linear-gradient(135deg, #fd79a8, #e84393)', icon: 'üé°' },
                'fireboy-watergirl': { bg: 'linear-gradient(135deg, #ff7675, #74b9ff)', icon: 'üî•' },
                'paper-io-2': { bg: 'linear-gradient(135deg, #a29bfe, #6c5ce7)', icon: 'üìÑ' },
                'wordle': { bg: 'linear-gradient(135deg, #55a3ff, #2d3436)', icon: 'üìù' }
            };

            const gameStyle = gameStyles[game.id] || { bg: 'linear-gradient(135deg, #667eea, #764ba2)', icon: 'üéÆ' };

            card.innerHTML = `
                <div class="game-image" style="background: ${gameStyle.bg};">
                    ${badgeHtml}
                    <div style="font-size: 48px; margin-bottom: 8px;">${gameStyle.icon}</div>
                    <div style="font-size: 12px; font-weight: 600; opacity: 0.9;">${game.title}</div>
                </div>
                <div class="game-info">
                    <div class="game-title">${game.title}</div>
                    <div class="game-category">${game.category || 'Game'}</div>
                    <div class="game-tags">
                        ${(game.tags || []).slice(0, 2).map(tag => 
                            `<span class="game-tag">${tag}</span>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            card.onclick = () => openGame(game);
            return card;
        }

        // ÊâìÂºÄÊ∏∏Êàè
        function openGame(game) {
            const gameUrl = game.embedUrl || game.url;
            if (!gameUrl) {
                alert(t('gameNotAvailable'));
                return;
            }

            // Ê∑ªÂä†Âà∞ÊúÄËøëÁé©ËøáÁöÑÊ∏∏Êàè
            addToRecentlyPlayed(game);

            document.getElementById('modalTitle').textContent = game.title;
            const gameFrame = document.getElementById('gameFrame');
            
            // ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
            gameFrame.style.display = 'none';
            const modalContent = document.querySelector('.modal-content');
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'gameLoading';
            loadingDiv.style.cssText = `
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: calc(100% - 60px);
                background: #f8f9fa;
                color: #5f6368;
            `;
            loadingDiv.innerHTML = `
                <div style="font-size: 48px; margin-bottom: 20px;">üéÆ</div>
                <div style="font-size: 18px; margin-bottom: 10px;">${t('loadingGames')}...</div>
                <div style="font-size: 14px; color: #9aa0a6;">${game.title}</div>
            `;
            modalContent.appendChild(loadingDiv);

            // ËÆæÁΩÆÊ∏∏ÊàèÊ°ÜÊû∂Ê∫ê
            gameFrame.src = gameUrl;
            
            // ÁõëÂê¨Âä†ËΩΩÂÆåÊàê
            gameFrame.onload = function() {
                loadingDiv.remove();
                gameFrame.style.display = 'block';
            };
            
                         // ÁõëÂê¨Âä†ËΩΩÈîôËØØ
            gameFrame.onerror = function() {
                showDemoGame(loadingDiv, game);
            };
            
            // Ê£ÄÊµãÊòØÂê¶Êó†Ê≥ïÂú®iframe‰∏≠Âä†ËΩΩ
            setTimeout(() => {
                try {
                    if (gameFrame.contentDocument === null && gameFrame.contentWindow === null) {
                        showDemoGame(loadingDiv, game);
                    }
                } catch (e) {
                    showDemoGame(loadingDiv, game);
                }
            }, 3000);
            
            // ËÆæÁΩÆË∂ÖÊó∂Ê£ÄÊµã
            setTimeout(() => {
                if (document.getElementById('gameLoading')) {
                    showDemoGame(loadingDiv, game);
                }
            }, 8000); // 8ÁßíË∂ÖÊó∂

            document.getElementById('gameModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // Ê∑ªÂä†Âà∞ÊúÄËøëÁé©ËøáÁöÑÊ∏∏Êàè
        function addToRecentlyPlayed(game) {
            recentlyPlayed = recentlyPlayed.filter(g => g.id !== game.id);
            recentlyPlayed.unshift(game);
            recentlyPlayed = recentlyPlayed.slice(0, 8);
            localStorage.setItem('recentlyPlayed', JSON.stringify(recentlyPlayed));
            updateRecentlyPlayed();
        }

        // Êõ¥Êñ∞ÊúÄËøëÁé©ËøáÁöÑÊ∏∏ÊàèÊòæÁ§∫
        function updateRecentlyPlayed() {
            const grid = document.getElementById('recentlyGames');
            grid.innerHTML = '';
            
            if (recentlyPlayed.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #5f6368;">
                        <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">üéÆ</div>
                        <div style="font-size: 16px; margin-bottom: 8px;">${t('startPlayingMessage')}</div>
                    </div>
                `;
            } else {
                recentlyPlayed.forEach((game, index) => {
                    const gameCard = createGameCard(game, index);
                    grid.appendChild(gameCard);
                });
            }
        }

        // ËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨Âô®
        function setupEventListeners() {
            // ÂØºËà™È°πÁÇπÂáª
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');

                    const section = this.dataset.section;
                    const category = this.dataset.category;

                    if (section) {
                        showSection(section);
                    } else if (category) {
                        showCategory(category);
                    }
                });
            });

            // ÊêúÁ¥¢ÂäüËÉΩ
            const searchInput = document.getElementById('searchInput');
            let searchTimeout;
            
            // ÂÆûÊó∂ÊêúÁ¥¢
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    performSearch();
                }, 300); // 300msÂêéÊâßË°åÊêúÁ¥¢
            });
            
            // ÂõûËΩ¶ÊêúÁ¥¢
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    clearTimeout(searchTimeout);
                    performSearch();
                }
            });

            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            document.querySelector('.close').addEventListener('click', closeGameModal);
            
            // ESCÈîÆÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('gameModal').style.display === 'block') {
                    closeGameModal();
                }
            });

            // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            document.getElementById('gameModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeGameModal();
                }
            });
        }

        // ÊòæÁ§∫ÊºîÁ§∫Ê∏∏Êàè
        function showDemoGame(loadingDiv, game) {
            const defaultDescription = `${t('featuredGames')} - ${game.category} ${t('games')}!`;
            loadingDiv.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 48px; margin-bottom: 20px;">üéÆ</div>
                    <h3 style="color: #202124; margin-bottom: 15px;">${game.title}</h3>
                    <p style="color: #5f6368; margin-bottom: 20px; line-height: 1.5;">
                        ${game.description || defaultDescription}
                    </p>
                    <div style="background: #f8f9fa; border-radius: 12px; padding: 30px; margin-bottom: 20px;">
                        <div style="font-size: 24px; margin-bottom: 15px;">üèÜ</div>
                        <div style="color: #1a73e8; font-weight: 600; margin-bottom: 10px;">${t('gameFeatures')}</div>
                        <div style="color: #5f6368; font-size: 14px;">
                            ‚Ä¢ ${t('category')}: ${game.category}<br>
                            ‚Ä¢ ${t('tags')}: ${game.tags ? game.tags.slice(0, 3).join(', ') : 'Action, Fun, Exciting'}<br>
                            ‚Ä¢ ${t('gameId')}: ${game.id}
                        </div>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <button onclick="window.open('${game.embedUrl}', '_blank')" style="
                            background: #34a853;
                            color: white;
                            border: none;
                            padding: 12px 24px;
                            border-radius: 20px;
                            cursor: pointer;
                            margin-right: 10px;
                            font-weight: 600;
                        ">${t('openInNewTab')}</button>
                        <button onclick="closeGameModal()" style="
                            background: #4285f4;
                            color: white;
                            border: none;
                            padding: 12px 24px;
                            border-radius: 20px;
                            cursor: pointer;
                            font-weight: 600;
                        ">${t('close')}</button>
                    </div>
                    <div style="font-size: 12px; color: #9aa0a6;">
                        ${t('frameLoadingNote')}
                    </div>
                </div>
            `;
        }

        // ÂÖ≥Èó≠Ê∏∏ÊàèÊ®°ÊÄÅÊ°Ü
        function closeGameModal() {
            document.getElementById('gameModal').style.display = 'none';
            document.getElementById('gameFrame').src = '';
            document.getElementById('gameFrame').style.display = 'block';
            
            // Ê∏ÖÁêÜÂä†ËΩΩÁä∂ÊÄÅ
            const loadingDiv = document.getElementById('gameLoading');
            if (loadingDiv) {
                loadingDiv.remove();
            }
            
            document.body.style.overflow = 'auto';
        }

        // ÊòæÁ§∫‰∏çÂêåÂàÜÂå∫
        function showSection(section) {
            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            
            switch(section) {
                case 'home':
                    document.getElementById('recently').style.display = 'block';
                    document.getElementById('featured').style.display = 'block';
                    break;
                case 'recently':
                    document.getElementById('recently').style.display = 'block';
                    break;
                case 'featured':
                    document.getElementById('featured').style.display = 'block';
                    break;
                case 'new':
                    showNewGames();
                    break;
                case 'trending':
                    showTrendingGames();
                    break;
            }
        }

        // ÊòæÁ§∫Êñ∞Ê∏∏Êàè
        function showNewGames() {
            const newGames = allGames.filter(game => game.isNew);
            const grid = document.getElementById('newGames');
            grid.innerHTML = '';
            
            if (newGames.length === 0) {
                // Â¶ÇÊûúÊ≤°ÊúâÊ†áËÆ∞‰∏∫Êñ∞ÁöÑÊ∏∏ÊàèÔºåÊòæÁ§∫ÊâÄÊúâÊ∏∏Êàè
                const statsDiv = document.createElement('div');
                statsDiv.style.cssText = 'grid-column: 1 / -1; text-align: center; margin-bottom: 20px; color: #5f6368;';
                statsDiv.innerHTML = `${t('showingLatest')} ${allGames.length} ${t('games')}`;
                grid.appendChild(statsDiv);
                
                allGames.forEach((game, index) => {
                    const gameCard = createGameCard(game, index);
                    grid.appendChild(gameCard);
                });
            } else {
                const statsDiv = document.createElement('div');
                statsDiv.style.cssText = 'grid-column: 1 / -1; text-align: center; margin-bottom: 20px; color: #5f6368;';
                statsDiv.innerHTML = `${newGames.length} ${t('newGamesAvailable')}`;
                grid.appendChild(statsDiv);
                
                newGames.forEach((game, index) => {
                    const gameCard = createGameCard(game, index);
                    grid.appendChild(gameCard);
                });
            }
            
            document.getElementById('new').style.display = 'block';
        }

        // ÊòæÁ§∫ÁÉ≠Èó®Ê∏∏Êàè
        function showTrendingGames() {
            const hotGames = allGames.filter(game => game.isHot);
            const grid = document.getElementById('newGames'); // Â§çÁî®newGamesÁöÑgrid
            grid.innerHTML = '';
            
            // ‰øÆÊîπÂàÜÂå∫Ê†áÈ¢ò
            const sectionTitle = document.querySelector('#new .section-title');
            sectionTitle.textContent = t('trendingNow');
            
            if (hotGames.length === 0) {
                // Â¶ÇÊûúÊ≤°ÊúâÊ†áËÆ∞‰∏∫ÁÉ≠Èó®ÁöÑÊ∏∏ÊàèÔºåÊòæÁ§∫ÊâÄÊúâÊ∏∏Êàè
                const statsDiv = document.createElement('div');
                statsDiv.style.cssText = 'grid-column: 1 / -1; text-align: center; margin-bottom: 20px; color: #5f6368;';
                statsDiv.innerHTML = `${allGames.length} ${t('trendingGamesSelected')}`;
                grid.appendChild(statsDiv);
                
                allGames.forEach((game, index) => {
                    const gameCard = createGameCard(game, index);
                    grid.appendChild(gameCard);
                });
            } else {
                const statsDiv = document.createElement('div');
                statsDiv.style.cssText = 'grid-column: 1 / -1; text-align: center; margin-bottom: 20px; color: #5f6368;';
                statsDiv.innerHTML = `${hotGames.length} ${t('hotGamesTrending')}`;
                grid.appendChild(statsDiv);
                
                hotGames.forEach((game, index) => {
                    const gameCard = createGameCard(game, index);
                    grid.appendChild(gameCard);
                });
            }
            
            document.getElementById('new').style.display = 'block';
        }



        // ÊêúÁ¥¢Ê∏∏Êàè
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            if (!searchTerm) {
                displayFeaturedGames();
                return;
            }
            
            const searchResults = allGames.filter(game => 
                game.title.toLowerCase().includes(searchTerm) ||
                (game.description && game.description.toLowerCase().includes(searchTerm)) ||
                (game.tags && game.tags.some(tag => tag.toLowerCase().includes(searchTerm)))
            );
            
            const grid = document.getElementById('featuredGames');
            grid.innerHTML = '';
            
            if (searchResults.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #5f6368;">
                        <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">üîç</div>
                        <div style="font-size: 16px; margin-bottom: 8px;">No games found for "${searchTerm}"</div>
                        <div style="font-size: 14px; opacity: 0.7;">Try searching with different keywords</div>
                    </div>
                `;
                return;
            }
            
            // ÊòæÁ§∫ÊêúÁ¥¢ÁªìÊûúÁªüËÆ°
            const statsDiv = document.createElement('div');
            statsDiv.style.cssText = 'grid-column: 1 / -1; text-align: center; margin-bottom: 20px; color: #5f6368;';
            statsDiv.innerHTML = `Found ${searchResults.length} games matching "${searchTerm}"`;
            grid.appendChild(statsDiv);
            
            // ÊòæÁ§∫ÊâÄÊúâÊêúÁ¥¢ÁªìÊûú
            searchResults.forEach((game, index) => {
                const gameCard = createGameCard(game, index);
                grid.appendChild(gameCard);
            });
            
            // ÈöêËóèÂÖ∂‰ªñÂàÜÂå∫ÔºåÂè™ÊòæÁ§∫Featured
            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            document.getElementById('featured').style.display = 'block';
        }

        // ÊòæÁ§∫ÂàÜÁ±ªÊ∏∏Êàè
        function showCategory(category) {
            let filteredGames;
            if (category === 'all') {
                filteredGames = allGames;
            } else {
                filteredGames = allGames.filter(game => 
                    game.tags && game.tags.some(tag => 
                        tag.toLowerCase() === category.toLowerCase()
                    )
                );
            }
            
            const grid = document.getElementById('featuredGames');
            grid.innerHTML = '';
            
            if (filteredGames.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #5f6368;">
                        <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">üéÆ</div>
                        <div style="font-size: 16px; margin-bottom: 8px;">No ${category} games found</div>
                    </div>
                `;
                return;
            }
            
            // ÊòæÁ§∫ÂàÜÁ±ªÁªüËÆ°
            const statsDiv = document.createElement('div');
            statsDiv.style.cssText = 'grid-column: 1 / -1; text-align: center; margin-bottom: 20px; color: #5f6368;';
            statsDiv.innerHTML = `${filteredGames.length} ${category === 'all' ? 'total' : category} games available`;
            grid.appendChild(statsDiv);
            
            // ÊòæÁ§∫ÊâÄÊúâÁ≠õÈÄâÂêéÁöÑÊ∏∏Êàè
            filteredGames.forEach((game, index) => {
                const gameCard = createGameCard(game, index);
                grid.appendChild(gameCard);
            });

            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            document.getElementById('featured').style.display = 'block';
        }


    </script>
</body>
</html> 
